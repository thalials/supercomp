
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://insper.github.io/supercomp/aulas/02-03-implementacao-c%2B%2B/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.11">
    
    
      
        <title>02 e 03 - C++ - SuperComputação - 2021/2</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50e68009.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#757575">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/printing.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="grey" data-md-color-accent="red">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#0203-implementacao-em-c" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="SuperComputação - 2021/2" class="md-header__button md-logo" aria-label="SuperComputação - 2021/2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SuperComputação - 2021/2
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              02 e 03 - C++
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/insper/supercomp/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    SuperComp
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SuperComputação - 2021/2" class="md-nav__button md-logo" aria-label="SuperComputação - 2021/2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    SuperComputação - 2021/2
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/insper/supercomp/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    SuperComp
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../sobre/" class="md-nav__link">
        Burocracias
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Aulas
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Aulas" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Aulas
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01-introducao/" class="md-nav__link">
        01 - Introdução
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          02 e 03 - C++
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        02 e 03 - C++
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#compilacao" class="md-nav__link">
    Compilação
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entrada-e-saida-em-c" class="md-nav__link">
    Entrada e saída em C++
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vetores-em-c-com-vector" class="md-nav__link">
    Vetores em C++ com Vector
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matrizes-versao-1" class="md-nav__link">
    Matrizes (versão 1)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencias-e-passagem-de-dados" class="md-nav__link">
    Referências e passagem de dados
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uma-primeira-otimizacao" class="md-nav__link">
    Uma primeira otimização
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Projeto
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Projeto" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Projeto
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../projetos/" class="md-nav__link">
        Alinhamento de Sequencias de DNA
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#compilacao" class="md-nav__link">
    Compilação
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entrada-e-saida-em-c" class="md-nav__link">
    Entrada e saída em C++
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vetores-em-c-com-vector" class="md-nav__link">
    Vetores em C++ com Vector
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matrizes-versao-1" class="md-nav__link">
    Matrizes (versão 1)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencias-e-passagem-de-dados" class="md-nav__link">
    Referências e passagem de dados
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uma-primeira-otimizacao" class="md-nav__link">
    Uma primeira otimização
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/insper/supercomp/edit/master/docs/aulas/02-03-implementacao-c++/index.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="0203-implementacao-em-c">02/03 - Implementação em C++<a class="headerlink" href="#0203-implementacao-em-c" title="Permanent link">&para;</a></h1>
<p>A disciplina utilizará a linguagem C++ para implementação dos programas. Ela é muito usada em implementações de alto desempenho e possui recursos muito úteis e que simplificam a programação se comparada com C puro. Nas aulas 02 e 03 aprenderemos alguns desses recursos e os utilizaremos para implementação de algoritmos simples. </p>
<div class="admonition failure">
<p class="admonition-title">Gabaritos e respostas</p>
<p>Este curso não fornece código de resposta para os exercícios de sala. Cada exercício é acompanhado de um algoritmo em pseudo-código e alguns pares de arquivos entrada/saída. Isto já é suficiente para que vocês verifiquem se sua solução está correta. </p>
<p>Boas práticas de programação serão demonstradas em exercícios corrigidos pelo professor durante o semestre.</p>
</div>
<h2 id="compilacao">Compilação<a class="headerlink" href="#compilacao" title="Permanent link">&para;</a></h2>
<p>Programas em C++ são compilados com o comando <code>g++</code>. Ele funciona igual ao <code>gcc</code> que vocês já usaram em Desafios e Sistemas Hardware-Software.</p>
<div class="highlight"><pre><span></span><code>$&gt; g++ -Wall -O3 arquivo.cpp -o executavel
</code></pre></div>
<h2 id="entrada-e-saida-em-c">Entrada e saída em C++<a class="headerlink" href="#entrada-e-saida-em-c" title="Permanent link">&para;</a></h2>
<p>Em C usamos as funções <code>printf</code> para mostrar dados no terminal e <code>scanf</code> para ler dados. Em C++ essas funções também podem ser usadas, mas em geral são substituídas pelos objetos <code>std::cin</code> e <code>std::cout</code> (disponíveis no cabeçalho iostream). </p>
<p>A maior vantagem de usar <code>cin</code> e <code>cout</code> é que não precisamos mais daquelas strings de formatação estranhas com <code>%d</code>, <code>%s</code> e afins. Podemos passar variáveis diretamente para a saída do terminal usando o operador <code>&lt;&lt;</code>. Veja um exemplo abaixo. </p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"></span>
<span class="kt">double</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.2</span><span class="p">;</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Saída: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;;&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<div class="admonition hint">
<p class="admonition-title">E esse <code>std::</code>?</p>
<p>Em <code>C++</code> podemos ter várias funções, variáveis e objetos em geral com o mesmo nome. Para evitar que eles colidam e não se saiba a qual estamos nos referindo cada nome deve ser definido um <code>namespace</code> (literalmente <em>espaco de nomes</em>). Podemos ter <code>namespace</code>s aninhados.Por exemplo, <code>std::chrono</code> contém as funções relacionadas contagem de tempo durante a execução de um programa. </p>
<p>Todas as funções, classes e globais na biblioteca padrão estão definidas no espaço <code>std</code>. Se quisermos, podemos omitir escrever <code>std::</code> toda vez digitando <code>using namespace std</code>. Isso pode ser feito também com namespaces aninhados. </p>
</div>
<p>A implementação de algoritmos definidos usando expressões matemáticas é uma habilidade importante neste curso.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Escreva um programa que receba um inteiro <code>n</code> e calcule a seguinte série.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
S = \sum_{i=0}^n \frac{1}{2^i}
</div>
<script type="math/tex; mode=display">
S = \sum_{i=0}^n \frac{1}{2^i}
</script>
</div>
<p>Mostre as primeiras 15 casas decimais de <code>S</code>. Veja a documentação de <a href="http://cplusplus.com/reference/iomanip/setprecision/"><code>std::setprecision</code> aqui</a>. </p>
<details class="details">
<summary>Resposta</summary>
<p>Essa série converge para o número 2, mas sua resposta deverá ser sempre menor que este número. Logo, quanto maior <code>n</code> mais próxima sua resposta será. Seu programa deverá implementar algo como o algoritmo abaixo.</p>
<div class="highlight"><pre><span></span><code>leia inteiro n
s = 0.0
para i=0 até n
    s += 1 / (2 elevado a i)

print(s)
</code></pre></div>
</details>
</div>
<h2 id="vetores-em-c-com-vector">Vetores em C++ com Vector<a class="headerlink" href="#vetores-em-c-com-vector" title="Permanent link">&para;</a></h2>
<p>A estrutura <code>std::vector</code> é um vetor dinâmico que tem funcionalidades parecidas com a lista de Python ou o <code>ArrayList</code> de Java. O código abaixo exemplifica seu uso e mostra algumas de suas funções. Note que omitimos o uso de <code>std</code> no código abaixo.</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"></span>
<span class="n">cin</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"></span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vec</span><span class="p">;</span><span class="w"></span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">vec</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Tamanho do vetor: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Primeiro elemento: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="n">front</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Último elemento: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="n">back</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Elemento 3: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Alguns pontos interessantes deste exemplo:</p>
<ol>
<li>Não sabemos o tamanho de <code>vec</code> ao criá-lo. O método <code>push_back</code> aumenta ele quando necessário e não precisamos nos preocupar com isso. </li>
<li>O número de elementos colocados no vetor é retornado pelo método <code>size()</code></li>
<li>O acesso é feito exatamente igual ao array de C, usando os colchetes <code>[]</code></li>
</ol>
<div class="admonition tip">
<p class="admonition-title">E esse <code>&lt;double&gt;</code> na declaração?</p>
<p>Em C++ tipos passados entre <code>&lt; &gt;</code> são usados para parametrizar tipos genéricos. Ou seja, um vetor pode guardar qualquer tipo de dado e precisamos indicar qual ao criá-lo. </p>
<p>Note que, portanto, um vetor <code>vector&lt;int&gt;</code> e um vetor <code>vector&lt;double&gt;</code> são considerados de tipos diferentes e não posso passar o primeiro para uma função esperando o segundo. </p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Crie um programa que lê um número inteiro <code>n</code> e depois lê <code>n</code> números fracionários <span class="arithmatex"><span class="MathJax_Preview">x_i</span><script type="math/tex">x_i</script></span>. Faça os seguintes cálculos e motre-os no terminal com 10 casas decimais. </p>
<div class="arithmatex">
<div class="MathJax_Preview">\mu = \frac{1}{n} \sum_{i=1}^n x_i</div>
<script type="math/tex; mode=display">\mu = \frac{1}{n} \sum_{i=1}^n x_i</script>
</div>
<div class="arithmatex">
<div class="MathJax_Preview">\sigma^2 = \frac{1}{n} \sum_{i=1}^n (x_i - \mu)^2</div>
<script type="math/tex; mode=display">\sigma^2 = \frac{1}{n} \sum_{i=1}^n (x_i - \mu)^2</script>
</div>
<div class="admonition details">
<p class="admonition-title">Resposta</p>
<p>Use o programa <code>t4.py</code> para gerar entradas e saídas de teste para seu programa. </p>
</div>
</div>
<div class="admonition question short">
<p class="admonition-title">Question</p>
<p>Você reconhece as fórmulas acima? Elas calculam quais medidas estatísticas?</p>
<details class="details">
<summary>Resposta</summary>
<p>Média e variância.</p>
</details>
</div>
<h2 id="matrizes-versao-1">Matrizes (versão 1)<a class="headerlink" href="#matrizes-versao-1" title="Permanent link">&para;</a></h2>
<p>Dados <code>N</code> pontos com coordenadas <span class="arithmatex"><span class="MathJax_Preview">(x_i, y_i)_{i=0}^N</span><script type="math/tex">(x_i, y_i)_{i=0}^N</script></span>, computar a matriz de distâncias <span class="arithmatex"><span class="MathJax_Preview">D</span><script type="math/tex">D</script></span> tal que </p>
<div class="arithmatex">
<div class="MathJax_Preview">
D_{i,j} = \textrm{Distância entre } (x_i, y_i) \textrm{ e } (x_j, y_j)
</div>
<script type="math/tex; mode=display">
D_{i,j} = \textrm{Distância entre } (x_i, y_i) \textrm{ e } (x_j, y_j)
</script>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Use <code>t6.py</code> para gerar os arquivos de entrada/saída da tarefa abaixo. </p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Implemente um programa que calcule a matriz <code>D</code> acima. Sua entrada deverá estar no formato dos arquivos <code>t6-in-*.txt</code> e sua saída no formato dos arquivos <code>t6-out-*.txt</code>. Mostre as distâncias com 2 casas decimais.  </p>
<p><strong>Dicas</strong>:</p>
<ol>
<li>a maneira mais fácil (não necessariamente a melhor) de alocar uma matriz é usando um vetor em que cada elemento é outro vetor. </li>
<li>faça uma implementação o mais simples possível. Vamos melhorá-la nas próximas tarefas.</li>
</ol>
<details class="details">
<summary>Resposta</summary>
<div class="highlight"><pre><span></span><code>leia inteiro N
leia vetores X e Y 

seja D uma matriz NxN

para i=1..N:
    para j=1..N:
        DX = X[i] - X[j]
        DY = Y[i] - Y[j]
        D[i,j] = sqrt(DX*DX + DY*DY)
</code></pre></div>
</details>
</div>
<div class="admonition question medium">
<p class="admonition-title">Question</p>
<p>Anote abaixo o tempo de execução para os arquivos <code>t6-in-*.txt</code> e <code>t6-out-*.txt</code></p>
</div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Qual é a complexidade computacional de sua implementação? </p>
</div>
<h2 id="referencias-e-passagem-de-dados">Referências e passagem de dados<a class="headerlink" href="#referencias-e-passagem-de-dados" title="Permanent link">&para;</a></h2>
<p>Na parte anterior fizemos nosso programa inteiro no <code>main</code>. Vamos agora organizá-lo melhor. </p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Crie uma função <code>calcula_distancias</code> que recebe a matriz e os dados recebidos na entrada e a preenche. Sua função não deverá retornar nenhum valor. </p>
<p>Ao terminar, meça o tempo de execução para o arquivo <code>t6-out-4.txt</code>.</p>
<details class="details">
<summary>Resposta</summary>
<p>Aqui podem ocorrer dois problemas:</p>
<ol>
<li>Seu programa deu "Segmentation Fault". </li>
<li>Seu programa rodou até o fim, mas a saída é vazia (ou cheia de 0).</li>
</ol>
<p>O problema em si depende de como você fez o <code>for</code> duplo para mostrar os resultados. De qualquer maneira, simplesmente mover código para uma outra função não funciona neste caso. </p>
</details>
</div>
<p>Ambos problemas descritos na solução são previsíveis e ocorrem pela mesma razão: <strong>ao passar um <code>vector</code> para uma função é feita uma cópia de seu conteúdo</strong>. Ou seja, a matriz usada dentro de <code>calcula_distancias</code> não é a mesma do <code>main</code>! </p>
<p>Isto é considerado uma <em>feature</em> em <code>C++</code>: por padrão toda variável é passada <strong>por cópia</strong>. Isto evita que uma função modifique um valor sem que o código chamador fique sabendo. </p>
<p>Em <em>C</em> podemos passar variáveis <strong>por referência</strong> passando um ponteiro para elas. Apesar de funcional, isso não é muito prático pois temos que acessar a variável sempre usando <code>*</code>.  Em <em>C++</em> temos um novo recurso: referências. Ao declarar uma variável como uma referência crio uma espécie de <em>ponteiro constante</em> que sempre acessa a variável apontada. Veja o exemplo abaixo.</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="c1">// referências são declaradas colocando &amp; na frente do nome da variável</span>
<span class="c1">// a partir daqui ref e x representam a mesma variável</span>
<span class="n">ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">15</span><span class="p">;</span><span class="w"></span>
<span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// 15</span>
</code></pre></div>
<p>O mesmo poderia ser feito com ponteiros (como mostrado abaixo). A grande vantagem da referência é que não precisamos usar <code>*ref</code> para nos referirmos à variável <code>x</code>! Na atribuição também podemos usar direto <code>int &amp;ref = x</code>, o que torna o código mais limpo e fácil de entender.  </p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="c1">// precisamos de &amp;x para apontar ref para a variável x</span>
<span class="o">*</span><span class="n">ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">15</span><span class="p">;</span><span class="w"> </span><span class="c1">// precisamos indicar *ref para atribuir a variável x</span>
<span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// 15</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Dicas</p>
<p>Note que uma referência tem que ser inicializada com a variável a que ela se refere. Ou seja, ao declarar tenho que já indicar a variável destino e esse destino não pode ser modificado. </p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Modifique sua função para usar referências. Verifique que ele volta a funcionar e que seu tempo de execução continua parecido com a versão que rodava no <code>main</code>.</p>
<details class="details">
<summary>Resposta</summary>
<p>Basta adicionar <code>&amp;</code> na frente dos nomes dos argumentos (vetores x, y e matriz). A chamada da função não muda. </p>
</details>
</div>
<div class="admonition tip">
<p class="admonition-title">Dica</p>
<p>Em <em>C++</em> precisamos estar sempre atentos à maneira que passamos os dados. Se não indicarmos será por cópia. Para compartilhar o mesmo objeto entre várias funções usamos referências <code>&amp;</code>. </p>
</div>
<h2 id="uma-primeira-otimizacao">Uma primeira otimização<a class="headerlink" href="#uma-primeira-otimizacao" title="Permanent link">&para;</a></h2>
<p>Nossa primeira implementação é bastante direta da definição e não tenta ser eficiente. </p>
<div class="admonition question short">
<p class="admonition-title">Question</p>
<p>Analisando a definiçao da Tarefa 1, como seria possível economizar trabalho?</p>
<details class="details">
<summary>Resposta</summary>
<p>Podemos ver que a matriz <code>D</code> é simétrica. Ou seja, <code>D[i,j] == D[j,i]</code>. Isso significa que poderíamos calcular só um deles e copiar o valor para a outra posição.</p>
</details>
</div>
<div class="admonition question short">
<p class="admonition-title">Question</p>
<p>Como isso poderia ser usado para melhorar o tempo de execução de <code>calcula_distancias</code>?</p>
</div>
<div class="admonition question short">
<p class="admonition-title">Question</p>
<p>Seu programa criado na tarefa 1 consegue ser adaptado para implementar sua ideia da questão 
anterior? O que precisaria ser modificado?</p>
<details class="note">
<summary>Resposta</summary>
<p>Duas respostas são possíveis e corretas aqui:</p>
<ol>
<li>
<p>Preciso checar se o <code>i &gt; j</code> e usar o valor já calculado de <code>D[j,i]</code>.</p>
</li>
<li>
<p>É preciso alocar a matriz inteira antes de começar. Se formos dando <code>push_back</code> linha a linha não conseguimos atribuir um valor ao mesmo tempo a <code>D[i,j]</code> e <code>D[j,i]</code>, já que um deles ainda não terá sido criado. </p>
</li>
</ol>
</details>
</div>
<p>Baseado na resposta acima vamos tentar nossa primeira otimização: só vamos calcular <code>D[i,j]</code> para <code>i &lt;= j</code> (ou seja, só a metade "de cima" de <code>D</code>).</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Use a estratégia acima para evitar calcular a matriz inteira. Verifique se houve melhora no tempo do teste <code>t6-in-3.txt</code>.</p>
<p><strong>Dica</strong>: tente de novo usar a ideia mais simples possível e implemente adicionando um so <code>if</code> no seu programa.</p>
<details class="details">
<summary>Resposta</summary>
<p>Não deverá haver ganho de desempenho significativo. Veremos exatamente o por que na próxima aula. </p>
</details>
</div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../01-introducao/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 01 - Introdução" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              01 - Introdução
            </div>
          </div>
        </a>
      
      
        
        <a href="../../projetos/" class="md-footer__link md-footer__link--next" aria-label="Next: Alinhamento de Sequencias de DNA" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Alinhamento de Sequencias de DNA
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.092fa1f6.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a9542cf.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.0.0/js-yaml.min.js"></script>
      
        <script src="../../js/markdown-enhancer.js"></script>
      
        <script src="../../js/slides.js"></script>
      
    
  </body>
</html>